({3785:function(){var e,t;void 0===$.throttle&&(e=this,$.throttle=t=function(t,a,s,r){var n,o=0;function i(){var i=this,c=+new Date-o,l=arguments;function h(){o=+new Date,s.apply(i,l)}function u(){n=e}r&&!n&&h(),n&&clearTimeout(n),r===e&&c>t?h():!0!==a&&(n=setTimeout(r?u:h,r===e?t-c:t))}return"boolean"!=typeof a&&(r=s,s=a,a=e),$.guid&&(i.guid=s.guid=s.guid||$.guid++),i},$.debounce=function(a,s,r){return r===e?t(a,s,!1):t(a,r,!1!==s)}),$(window).on("scroll",$.throttle(0,(function(){$(window).width()>480&&$("#autocomp--new").hide()}))),$("body").on("click",(function(e){if(($(e.target).is($("#search_icon"))||$(e.target).is($(".view-all-results")))&&(setTimeout((function(){var e=new URL(window.location.href).searchParams.get("query");$(".search-mobile__input input").val(e)}),500),$("#autocomp--new").hide(),$(window).width()<=992&&$(".header__search-input").hide()),$(e.target).closest(".header-search-history, .home-search-history").length||$(".header-search-history, .home-search-history").hide(),$(".search-wrapper").length>0&&($(e.target).is($(".search-wrapper .view-all-results"))||$(e.target).is($(".header__search-input .view-all-results")))&&(e.preventDefault(),$("#home-header-search").submit()),$(e.target).is($(".search-container .view-all-results"))){e.preventDefault(),$("#header-search-form").submit();var t=new URL(window.location.href).searchParams.get("query");$(".search-mobile__input input").val(t)}$(e.target).is($(".search-mobile__input .view-all-results"))&&(e.preventDefault(),$("#home-header-search").submit())}));var a={en:"/tag/english-language",es:"/es/etiquetar/idioma-ingles",fr:"/fr/tag/langue-anglaise",it:"/it/tag/lingua-inglese","pt-BR":"/pt-BR/etiqueta/idioma-ingles"};$(".recent-searches").on("click",".recent-search-item .recent-search-item__text",(function(e){var t=$(this).find(".recent-search-item__text").text().trim();$("#header-search-form input").val(t),$("#header-search-form").closest("form").submit(),$(this).parents(".header-search-history").hide()})),$(document).on("click","#header-search-form, #home-header-search",(function(){var e,t,a=$("body").attr("data-api_endpoint"),s=localStorage.getItem("searchHistory");s&&""!==s.trim()?(e=JSON.parse(localStorage.getItem("searchHistory"))||[],(t=$(".recent-searches ul")).empty(),$.each(e,(function(e,a){t.append('<li class="recent-search-item"><span class="recent-search-item__text">'.concat(a,'</span><span class="recent-search-item__remove">Remove</span></li>'))}))):"header-search-form"===$(this).attr("id")?$("#autocomp--new").length||($(".header-search-history, #search-courses, .most-popular").show(),$(".header-search-history .recent-searches").hide()):$("#autocomp--new").length||($(".home-search-history, #search-courses, .most-popular").show(),$(".home-search-history .recent-searches").hide()),$.ajax({url:a+"/course/popular?locale=en",type:"GET",success:function(e){0===$(".top-free").length&&$.each(e.result,(function(e,t){e<3&&$(".search-top-courses ul, .top-courses ul").append('<li class="top-free"><a href="/course/'+t.slug+'">'+t.name+"</a></li>")}))}}),s&&"[]"!==s?($("#autocomp--new").hide(),"header-search-form"===$(this).attr("id")?($(".header-search-history .recent-searches, .header-search-history").show(),$("#search-courses").hide()):$(".home-search-history .recent-searches, .home-search-history").show()):"header-search-form"===$(this).attr("id")?$(".header-search-history #search-courses").show():$(".home-search-history #search-courses").show()}));var s={options:{typeLength:2,inputBox:document.querySelectorAll(".autocomplete_field")},onType:function(){var e,t=this;$.each(this.options.inputBox,(function(){this.onclick=function(){var e=$(this),t=$(this).parent().find("#autocomp--new");e.val().length>4&&t.length>0&&(t.fadeIn(),e.off("focus"))},this.onkeyup=t.throttle((function(a){$(".active-input").removeClass("active-input"),$(this).addClass("active-input");var s=$(this).val(),n=$(this),o=$(this).parent().find("#autocomp--new");if(13===a.which){$(".header-search-history").hide(),o.hide(),$(document).on("focus",n,(function(){n.val().length>4&&(o.fadeIn(),n.off("focus"))})),r();var i="searchHistory";if(o.find("a.selected").is("a"))o.find("a.selected")[0].click();else if(""!==n.val()&&0===$("#search-heading").length){if("undefined"!=typeof sessionStorage){sessionStorage.setItem("_last_search_query","&query="+$(this).val()),sessionStorage.removeItem("_onbeforeunload"),sessionStorage.removeItem("_filter_cats"),sessionStorage.removeItem("_filter_langs"),sessionStorage.removeItem("_filter_inpts");var c=$("#header-search-form input").val().trim()||$("#home-header-search input").val().trim();if(""===c)return;var l=JSON.parse(localStorage.getItem(i))||[];(l=l.filter((function(e){return e!==c}))).unshift(c),l.length>5&&(l=l.slice(0,5)),localStorage.setItem(i,JSON.stringify(l))}}else{a.preventDefault();var h="";$.each($("[name=query]"),(function(){h+=$(this).val()})),(""===h||$(".active-input").length>0&&""===$(".active-input").val())&&(window.location.href="/all-free-online-courses-certificates-diplomas")}}else!o.is(":visible")&&n.val().length>4&&o.fadeIn(),8===a.keyCode&&(e=!1),38===a.which||40===a.which?(o.find("a.selected").each((function(){e=!0,$(this).removeClass("selected");var t=$(".autocomplete--search-categories > a"),s=$(".autocomplete--search-careers > a"),r=$(".autocomplete--search-terms > a");38===a.which&&($(this).html()===t.first().html()?r.last().addClass("selected"):$(this).html()===s.first().html()?t.length?t.last().addClass("selected"):r.last().addClass("selected"):$(this).html()===r.first().html()?s.length?s.last().addClass("selected"):t.length?t.last().addClass("selected"):r.last().addClass("selected"):$(this).prev().addClass("selected")),40===a.which&&($(this).html()===r.last().html()?t.length?t.first().addClass("selected"):s.length?s.first().addClass("selected"):r.first().addClass("selected"):$(this).html()===s.last().html()?r.first().addClass("selected"):$(this).html()===t.last().html()?s.length?s.first().addClass("selected"):r.first().addClass("selected"):$(this).next().addClass("selected"))})),e||o.find("a").first().addClass("selected")):s.length>t.options.typeLength?t.fetchApi(s):o.fadeOut((function(){$(this).remove()}))}),10),this.onkeydown=function(e){if(38===e.which)return e.preventDefault(),!1},this.onkeypress=function(e){if(38===e.which)return e.preventDefault(),!1}}))},throttle:function(e,t){var a=0;return function(){var s=this,r=arguments;clearTimeout(a),a=setTimeout((function(){e.apply(s,r)}),t||0)}},fetchApi:function(e){if(e){var t="";$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("x-header-host","oTbrPD9HRO+jdciawiXuh4vUgB8=")}}),$.ajax({type:"GET",url:window.apiEndpoint+"/course/autocomplete/"+window.locale+"?query="+e,dataType:"json",async:!0,success:function(e){if(200===e.status)if(e.result.hasOwnProperty("queries")&&null!==e.result.queries&&e.result.queries.length>0||e.result.hasOwnProperty("tags")&&null!==e.result.tags&&e.result.tags.length>0||e.result.hasOwnProperty("careers")&&null!==e.result.careers&&e.result.careers.length>0){if(t+='<div><p class="autocomplete-title">Popular Search Terms</p>',e.result.hasOwnProperty("tags")&&null!==e.result.tags&&e.result.tags.length>0){t+='<div class="autocomplete--search-categories">';for(var a=0;a<e.result.tags.length;a++)t+='<a class="new new--link" href="'+window.tagPage+"/"+e.result.tags[a].slug+'" data-name="'+e.result.tags[a].name+'"><span class="search-term-icon search--categories icon-search2"></span> <span class="autocomp-t">'+e.result.tags[a].formattedName+'</span><span class="autocomp-ty">in subjects</span></a>';t+="</div>"}if(e.result.hasOwnProperty("careers")&&null!==e.result.careers&&e.result.careers.length>0){for(t+='<div class="autocomplete--search-careers">',a=0;a<Math.min(e.result.careers.length,5);a++)t+='<a class="new new--link" href="'+window.careerPage+"/"+e.result.careers[a].slug+'" data-name="'+e.result.careers[a].name+'"><span class="search-term-icon search--terms icon-search2"></span>  <span class="autocomp-t">'+e.result.careers[a].formattedName+'</span><span class="autocomp-ty">in careers</span></a>';t+="</div>"}if(e.result.hasOwnProperty("queries")&&null!==e.result.queries&&e.result.queries.length>0){for(0!==e.result.queries.filter((function(e){return"english"===e.name||"english language"===e.name})).length&&(t+='<a class="new new--link" href="hubs/english-test"><span class="search-term-icon search--terms icon-search2"></span> <span class="autocomp-t">Alison\'s Free <em>English</em> Test</span><span class="autocomp-ty">in tests & assessments</span></a>'),t+='<div class="autocomplete--search-terms">',a=0;a<Math.min(e.result.queries.length,5);a++){var r=window.searchPage+"?query="+e.result.queries[a].name;t+='<a class="new new--link" href="'+r+'" data-name="'+e.result.queries[a].name+'"><span class="search-term-icon search--terms icon-search2"></span><span class="autocomp-t">'+e.result.queries[a].formattedName+"</span></a>"}t+="</div>"}t+='<span class="view-all-results">View all results<span class="icon-chevron-right"></span></span>',t+="</div>",s.buildHtml(t)}else s.buildHtml("")},error:function(e){console.log("/F1 err/: ",e)}})}},buildHtml:function(e){if(""===e)return $(".active-input").removeClass("active-input"),void $("#autocomp--new").remove();var t="";null===document.getElementById("autocomp--new")?((t=document.createElement("div")).id="autocomp--new",$(".header-search-history").hide()):(t=document.getElementById("autocomp--new")).innerHTML="",t.insertAdjacentHTML("beforeend",e),$(".active-input")[0].parentNode.appendChild(t)}};function r(){if(0!==$(".active-input").length){var e=!1,t="english"===$(".active-input").val().toLowerCase()||"english language"===$(".active-input").val().toLowerCase();if($(".autocomplete--search-categories .new--link").first().length&&$(".autocomplete--search-categories .new--link").first().attr("href").indexOf("/tag/english-language")>-1&&(t=!0),t&&(e=!0,location.href=a[language]),!e){var s=$(".active-input").val();setTimeout((function(){$(".active-input").val(s)}),0)}}}function n(e,t,a){if(void 0!==$("body").attr("data-loggedin")){var s=JSON.stringify({search_type:e,search_term:t.toLowerCase()});$.ajax({url:"/api/v1/users-search-terms",type:"POST",headers:{"Content-Type":"application/json"},data:s,success:function(){console.debug("term saved",s)},complete:function(){location.href=a}})}else location.href=a}null!==document.querySelectorAll(".autocomplete_field")&&s.onType();var o="searchHistory";function i(e){var t=e.trim().toLowerCase();if(""!==t){var a=JSON.parse(localStorage.getItem(o))||[];(a=a.filter((function(e){return e!==t}))).unshift(t),a=a.slice(0,5),localStorage.setItem(o,JSON.stringify(a)),function(){var e=JSON.parse(localStorage.getItem(o))||[],t=$(".header-search-history .recent-searches ul");t.empty(),e.forEach((function(e){t.append('<li><a href="#">'.concat(e,"</a></li>"))}))}()}}$(".header-search-history, .home-search-history").on("click","li a",(function(e){e.preventDefault(),e.stopPropagation();var t=$(this).text().trim(),a=$(this).attr("href")||"/courses?query=".concat(encodeURIComponent(t));t&&(i(t),setTimeout((function(){window.location.href=a}),100))})),$("#header-search-form").on("submit",(function(e){if(""===$("#autocomplete").val())e.preventDefault(),window.location.href="/all-free-online-courses-certificates-diplomas";else{var t=$("#header-search-form input, #home-header-search input").val().trim();if(!t)return;i(t),$("#autocomp--new").hide(),"undefined"!=typeof sessionStorage&&(sessionStorage.setItem("_last_search_query","&query="+$(".active-input").val()),sessionStorage.removeItem("_onbeforeunload"),sessionStorage.removeItem("_filter_cats"),sessionStorage.removeItem("_filter_langs"),sessionStorage.removeItem("_filter_inpts")),r()}})),$(".recent-searches").on("click",".recent-search-item__remove",(function(e){e.preventDefault(),e.stopPropagation();var t=$(this).siblings(".recent-search-item__text").text().trim(),a=JSON.parse(localStorage.getItem("searchHistory"))||[];a=a.filter((function(e){return e!==t})),localStorage.setItem("searchHistory",JSON.stringify(a)),$(this).closest("li").remove(),0===a.length&&($(".header-search-history, .recent-searches, .home-search-history").hide(),localStorage.removeItem("searchHistory"))})),$(document).on("click","a.new--link",(function(e){var t=$(e.target).attr("href");if(e.preventDefault(),"autocomplete--search-terms"===$(this)[0].parentElement.className){var a=$(this).text().trim();$(".autocomplete--search-categories a").each((function(e,t){$(t).find(".autocomp-t").text().trim().toLowerCase()===a.toLowerCase()&&n("tag",$(this).attr("data-name"),$(t).attr("href"))})),$(".autocomplete--search-careers a").each((function(e,t){$(t).find(".autocomp-t").text().trim().toLowerCase()===a.toLowerCase()&&n("career",$(this).attr("data-name"),$(t).attr("href"))}))}$(e.target).parent().hasClass("autocomplete--search-categories")&&n("tag",$(e.target).attr("data-name"),$(e.target).attr("href")),$(e.target).parent().hasClass("autocomplete--search-careers")&&n("career",$(e.target).attr("data-name"),$(e.target).attr("href")),""!==e.target.textContent&&"undefined"!=typeof sessionStorage&&(sessionStorage.setItem("_last_search_query","&query="+e.target.textContent),sessionStorage.removeItem("_onbeforeunload"),sessionStorage.removeItem("_filter_cats"),sessionStorage.removeItem("_filter_langs"),sessionStorage.removeItem("_filter_inpts")),location.href=t}))}})[3785]();